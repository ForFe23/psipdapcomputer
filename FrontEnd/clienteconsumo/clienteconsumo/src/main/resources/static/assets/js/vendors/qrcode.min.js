
!function(){function l(h,k){k=k||{};var u=function(){var a=0,b=0,c=0;this.read=function(){0==a&&(b=h.getNextBits(8),c=0);var d=1==((b>>>7-c)&1);c+=1;8==c&&(a=0);return d}};var x=function(a,b){this.buffer=new Array;this.length=0;a&&("string"==typeof a?this.putString(a,b||"ISO-8859-1"):Array.isArray(a)?a.forEach(function(c){this.put(c,8)},this):void 0);this.getBuffer=function(){return this.buffer};this.getLengthInBits=function(){return this.length};this.put=function(c,d){for(var e=0;e<d;e++)this.putBit(c>>>d-e-1&1)};this.putBit=function(c){var d=Math.floor(this.length/8);this.buffer.length<=d&&this.buffer.push(0);c&&(this.buffer[d]|=128>>>this.length%8);this.length+=1};this.putString=function(c,d){d=d||"UTF-8";c=y(c,d);for(var e=0;e<c.length;e++)this.put(c[e],8)}};var y=function(a,b){if("UTF-8"===b){for(var c=[],d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?c.push(e):2048>e?(c.push(192|e>>6),c.push(128|63&e)):55296<=e&&57343>=e?(d++,e=65536+((1023&e)<<10|1023&a.charCodeAt(d)),c.push(240|e>>18),c.push(128|e>>12&63),c.push(128|e>>6&63),c.push(128|63&e)):(c.push(224|e>>12),c.push(128|e>>6&63),c.push(128|63&e))}return c}for(d=[],c=0;c<a.length;c++)e=a.charCodeAt(c),128>e?d.push(e):256>e?d.push(e):d.push("?".charCodeAt(0));return d};var z=function(a,b){this.typeNumber=a;this.errorCorrectLevel=b;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[];this.addData=function(c,d){d=d||"Byte";c=new A(d,c);this.dataList.push(c);this.dataCache=null};this.isDark=function(c,d){if(0>c||this.moduleCount<=c||0>d||this.moduleCount<=d)throw Error(c+","+d);return this.modules[c][d]};this.getModuleCount=function(){return this.moduleCount};this.make=function(){if(1>this.typeNumber){var c=1;for(c=1;40>=c;c++){for(var d=B.getRSBlocks(c,this.errorCorrectLevel),e=new x,f=0,g=0;g<d.length;g++)f+=d[g].dataCount;for(g=0;g<this.dataList.length;g++)e.put(this.dataList[g].mode,4),e.put(this.dataList[g].getLength(),B.getLengthInBits(this.dataList[g].mode,c)),this.dataList[g].write(e);for(d=8*f;!(e.getLengthInBits()<=d);)c++;}this.typeNumber=c}this.makeImpl(!1,this.getBestMaskPattern())};this.makeImpl=function(c,d){this.moduleCount=4*this.typeNumber+17;this.modules=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++){this.modules[e]=new Array(this.moduleCount);for(var f=0;f<this.moduleCount;f++)this.modules[e][f]=null}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(c,d);1<=this.typeNumber&&this.setupTypeNumber(c);null==this.dataCache&&(this.dataCache=B.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,d)};this.setupPositionProbePattern=function(c,d){for(var e=-1;7>=e;e++)if(!(0>c+e||this.moduleCount<=c+e))for(var f=-1;7>=f;f++)0>d+f||this.moduleCount<=d+f||(this.modules[c+e][d+f]=0<=e&&6>=e&&(0==f||6==f)||0<=f&&6>=f&&(0==e||6==e)||2<=e&&4>=e&&2<=f&&4>=f)};this.getBestMaskPattern=function(){for(var c=0,d=0,e=0;8>e;e++){this.makeImpl(!0,e);var f=C.getLostPoint(this);(0==e||f<c)&&(c=f,d=e)}return d};this.createMovieClip=function(c,d,e){c=c||"qr_"+Math.floor(1E4*Math.random()).toString(16);d=d||1;e=void 0===e?d:e;var f="";this.make();for(var g=0;g<this.modules.length;g++)for(var m=g*d,n=0;n<this.modules[g].length;n++){var p=n*d;if(this.modules[g][n]){f+='<rect x="'+p+'" y="'+m+'" width="'+d+'" height="'+d+'" fill="#000000" stroke="none"';f+="/>\n"}else if(e){f+='<rect x="'+p+'" y="'+m+'" width="'+d+'" height="'+d+'" fill="#ffffff" stroke="none"';f+="/>\n"}}return'<svg xmlns="http://www.w3.org/2000/svg" width="'+this.moduleCount*d+'" height="'+this.moduleCount*d+'" viewBox="0 0 '+this.moduleCount+" "+this.moduleCount+'">\n'+f+"</svg>"};this.createDataURL=function(c,d){c=c||2;d=void 0===d?0:d;var e=this.createMovieClip(null,c,d);return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e)))};this.setupTimingPattern=function(){for(var c=8;c<this.moduleCount-8;c++)null==this.modules[c][6]&&(this.modules[c][6]=0==c%2),null==this.modules[6][c]&&(this.modules[6][c]=0==c%2)};this.setupPositionAdjustPattern=function(){for(var c=B.getPatternPosition(this.typeNumber),d=0;d<c.length;d++)for(var e=0;e<c.length;e++){var f=c[d],g=c[e];if(null==this.modules[f][g])for(var m=-2;2>=m;m++)for(var n=-2;2>=n;n++)this.modules[f+m][g+n]=-2==m||2==m||-2==n||2==n||0==m&&0==n}};this.setupTypeNumber=function(c){for(var d=B.getBCHTypeNumber(this.typeNumber),e=0;18>e;e++){var f=!c&&(1==d>>e&1);this.modules[Math.floor(e/3)][e%3+this.moduleCount-8-3]=f;this.modules[e%3+this.moduleCount-8-3][Math.floor(e/3)]=f}};this.setupTypeInfo=function(c,d){for(var e=this.errorCorrectLevel<<3|d,f=B.getBCHTypeInfo(e),g=0;15>g;g++){var m=!c&&(1==f>>g&1);6>g?this.modules[g][8]=m:8<g?this.modules[g+1][8]=m:this.modules[8][this.moduleCount-15+g]=m}for(g=0;15>g;g++){m=!c&&(1==f>>g&1);8>g?this.modules[8][this.moduleCount-g-1]=m:8<g?this.modules[8][14-g]=m:this.modules[14-g][8]=m}this.modules[this.moduleCount-8][8]=!c};this.mapData=function(c,d){for(var e=-1,f=this.moduleCount-1,g=7,m=0,p=this.moduleCount-1;0<p;p-=2){6==p&&p--;for(var n=!0;;){for(var r=0;2>r;r++)if(null==this.modules[f][p-r]){var t=!1;m<c.length&&(t=1==(c[m]>>>g&1));C.getMask(d,f,p-r)&&(t=!t);this.modules[f][p-r]=t;g--; -1==g&&(m++,g=7)}f+=n?-1:1;if(0>f||this.moduleCount<=f){f+=n?1:-1;n=!n;break}}}}};var A=function(a,b){this.mode=D[a];this.data=b;this.getLength=function(){return y(b,"Byte"===a?"UTF-8":"ISO-8859-1").length};this.write=function(c){if("Numeric"===a){for(var d=y(b,"ISO-8859-1"),e=0;e<d.length;){var f="";for(var g=0;3>g&&e+d.length;g++,e++)f+=d[e];f.length=1?c.put(Number(f),4):2==f.length?c.put(Number(f),7):3==f.length&&c.put(Number(f),10)}}else if("Alphanumeric"===a){d=y(b,"ISO-8859-1");e=0;for(var m="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n=function(r){r=d[e];e+=1;return m.indexOf(String.fromCharCode(r))};e<d.length;){f=n();if(e<d.length){g=n();c.put(45*f+g,11)}else c.put(f,6)}}else if("Byte"===a||"Kanji"===a){d=y(b,"Byte"===a?"UTF-8":"SJIS");for(e=0;e<d.length;e++)c.put(d[e],8)}}};var B=function(){var a=[[1,26,19],[1,44,34],[1,70,55],[1,100,80],[1,134,108],[2,86,68],[2,98,78],[2,121,97],[2,146,116],[2,86,68],[2,98,78],[4,121,97],[2,146,116],[3,86,68],[4,98,78],[4,121,97],[3,146,116],[4,86,68],[2,98,78],[4,121,97],[4,146,116],[2,86,68],[4,98,78],[4,121,97],[4,146,116],[2,86,68],[4,98,78],[4,121,97],[4,146,116],[2,86,68],[4,98,78],[4,121,97],[4,146,116],[2,86,68],[4,98,78],[4,121,97],[4,146,116],[2,86,68],[4,98,78],[4,121,97]],b={L:1,M:0,Q:3,H:2};return{RS_BLOCK_TABLE:[[1,26,19],[1,44,34],[1,70,55],[1,100,80],[1,134,108],[2,86,68],[2,98,78],[2,121,97],[2,146,116],[2,86,68],[2,98,78],[4,121,97],[2,146,116],[3,86,68],[4,98,78],[4,121,97],[3,146,116],[4,86,68],[2,98,78],[4,121,97],[4,146,116],[2,86,68],[4,98,78],[4,121,97],[4,146,116],[2,86,68],[4,98,78],[4,121,97],[4,146,116],[2,86,68],[4,98,78],[4,121,97],[4,146,116],[2,86,68],[4,98,78],[4,121,97],[4,146,116],[2,86,68],[4,98,78],[4,121,97]],PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],getBCHTypeInfo:function(c){for(var d=c<<10;0<=C.getBCHDigit(d)-C.getBCHDigit(1335);)d^=1335<<C.getBCHDigit(d)-C.getBCHDigit(1335);return c<<10|d},getBCHTypeNumber:function(c){for(var d=c<<12;0<=C.getBCHDigit(d)-C.getBCHDigit(7973);)d^=7973<<C.getBCHDigit(d)-C.getBCHDigit(7973);return c<<12|d},getPatternPosition:function(c){return b=c,B.PATTERN_POSITION_TABLE[c-1]},getMask:function(c,d,e){switch(c){case 0:return 0==(d+e)%2;case 1:return 0==d%2;case 2:return 0==e%3;case 3:return 0==(d+e)%3;case 4:return 0==(Math.floor(d/2)+Math.floor(e/3))%2;case 5:return 0==d*e%2+d*e%3;case 6:return 0==(d*e%2+d*e%3)%2;case 7:return 0==(d*e%3+(d+e)%2)%2;default:throw Error("bad maskPattern:"+c);}},getErrorCorrectPolynomial:function(c){for(var d=new F([1],0),e=0;e<c;e++)d=d.multiply(new F([1,E.gexp(e)],0));return d},getLengthInBits:function(c,d){if(1<=d&&9>=d)switch(c){case D.Numeric:return 10;case D.Alphanumeric:return 9;case D.Byte:return 8;case D.Kanji:return 8;default:throw Error("mode:"+c);}else if(10<=d&&26>=d)switch(c){case D.Numeric:return 12;case D.Alphanumeric:return 11;case D.Byte:return 16;case D.Kanji:return 10;default:throw Error("mode:"+c);}else if(27<=d&&40>=d)switch(c){case D.Numeric:return 14;case D.Alphanumeric:return 13;case D.Byte:return 16;case D.Kanji:return 12;default:throw Error("mode:"+c);}else throw Error("type:"+d);},getRSBlocks:function(c,d){var e=B.getRSBlockTable(c,d);if(!e)throw Error("bad rs block @ typeNumber:"+c+"/errorCorrectLevel:"+d);for(var f=e.length/3,g=[],m=0;m<f;m++)for(var n=e[3*m+0],r=e[3*m+1],t=e[3*m+2],v=0;v<n;v++)g.push(new G(r,t));return g},getRSBlockTable:function(c,d){switch(d){case 1:return B.RS_BLOCK_TABLE[0];case 0:return B.RS_BLOCK_TABLE[1];case 3:return B.RS_BLOCK_TABLE[2];case 2:return B.RS_BLOCK_TABLE[3];default:return void 0}}}}();var C={PATTERN_POSITION_TABLE:B.PATTERN_POSITION_TABLE,getBCHDigit:function(a){for(var b=0;0!=a;)b+=1,a>>=1;return b},getMask:function(){return B.getMask.apply(B,arguments)},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;d<b;d++)for(var e=0;e<b;e++){for(var f=0,g=a.isDark(d,e),m=-1;1>=m;m++)if(!(0>d+m||b<=d+m))for(var n=-1;1>=n;n++)0>e+n||b<=e+n||0==m&&0==n||g==a.isDark(d+m,e+n)&&f++;4<f&&(c+=3+f-5)}for(d=0;d<b-1;d++)for(e=0;e<b-1;e++){f=0;g=a.isDark(d,e);g==a.isDark(d+1,e)&&g==a.isDark(d,e+1)&&g==a.isDark(d+1,e+1)&&(f=1);f&&(c+=3)}for(d=0;d<b;d++)for(e=0;e<b-6;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(e=0;e<b;e++)for(d=0;d<b-6;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(e=f=0;e<b;e++)for(d=0;d<b;d++)a.isDark(d,e)&&f++;a=Math.abs(100*f/b/b-50)/5;c+=10*a;return c}};var E=function(){for(var a=new Array(256),b=new Array(256),c=0;8>c;c++)a[c]=1<<c;for(c=8;256>c;c++)a[c]=a[c-4]^a[c-5]^a[c-6]^a[c-8];for(c=0;255>c;c++)b[a[c]]=c;return{glog:function(d){if(1>d)throw Error("glog("+d+")");return b[d]},gexp:function(d){for(;0>d;)d+=255;for(;256<=d;)d-=255;return a[d]}}}();var F=function(a,b){if(void 0===a.length)throw Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=new Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]};F.prototype.get=function(a){return this.num[a]};F.prototype.getLength=function(){return this.num.length};F.prototype.multiply=function(a){for(var b=new Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var d=0;d<a.getLength();d++)b[c+d]^=E.gexp(E.glog(this.get(c))+E.glog(a.get(d)));return new F(b,0)};F.prototype.mod=function(a){if(0>this.getLength()-a.getLength())return this;for(var b=E.glog(this.get(0))-E.glog(a.get(0)),c=new Array(this.getLength()),d=0;d<this.getLength();d++)c[d]=this.get(d);for(d=0;d<a.getLength();d++)c[d]^=E.gexp(E.glog(a.get(d))+b);return new F(c,0).mod(a)};var G=function(a,b){this.totalCount=a;this.dataCount=b};var D={Numeric:1,Alphanumeric:2,Byte:4,Kanji:8};window.qrcode=function(a,b){return new z(a,b)}}();

